<svg xmlns="http://www.w3.org/2000/svg" width="980" height="220" viewBox="0 0 980 220">
  <defs>
    <style>
      .box { fill: #ffffff; stroke: #1f2937; stroke-width: 2; }
      .hdr { fill: #f3f4f6; stroke: #1f2937; stroke-width: 2; }
      .t1  { font: 600 14px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; fill: #111827; }
      .t2  { font: 400 13px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; fill: #111827; }
      .mono{ font: 600 12px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; fill: #111827; }
      .arrow { stroke: #111827; stroke-width: 2.5; fill: none; marker-end: url(#m); }
      .note { font: 400 12px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; fill: #374151; }
    </style>
    <marker id="m" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#111827"/>
    </marker>
  </defs>

  <text x="20" y="28" class="t1">VMEC Step-10 parity pipeline in vmec-jax (fixed-boundary)</text>
  <text x="20" y="50" class="note">Goal: reproduce VMEC2000 scalar residuals (fsqr, fsqz, fsql) computed from forces + tomnsps + getfsq.</text>

  <!-- Inputs -->
  <rect x="20" y="78" width="180" height="110" rx="10" class="box"/>
  <rect x="20" y="78" width="180" height="32" rx="10" class="hdr"/>
  <text x="34" y="100" class="t1">Inputs</text>
  <text x="34" y="132" class="t2">INDATA (profiles)</text>
  <text x="34" y="156" class="t2">Fourier state</text>
  <text x="34" y="176" class="mono">Rmn, Zmn, λmn</text>

  <!-- bcovar -->
  <rect x="250" y="78" width="190" height="110" rx="10" class="box"/>
  <rect x="250" y="78" width="190" height="32" rx="10" class="hdr"/>
  <text x="264" y="100" class="t1">bcovar</text>
  <text x="264" y="132" class="t2">metrics + Jacobian</text>
  <text x="264" y="156" class="t2">B field (co/contra)</text>
  <text x="264" y="176" class="t2">λ-force kernels</text>

  <!-- forces -->
  <rect x="490" y="78" width="190" height="110" rx="10" class="box"/>
  <rect x="490" y="78" width="190" height="32" rx="10" class="hdr"/>
  <text x="504" y="100" class="t1">forces</text>
  <text x="504" y="132" class="t2">(A,B,C) kernels</text>
  <text x="504" y="156" class="t2">R/Z + constraint</text>
  <text x="504" y="176" class="t2">parity split (even/odd m)</text>

  <!-- tomnsps -->
  <rect x="730" y="78" width="210" height="110" rx="10" class="box"/>
  <rect x="730" y="78" width="210" height="32" rx="10" class="hdr"/>
  <text x="744" y="100" class="t1">tomnsps / getfsq</text>
  <text x="744" y="132" class="t2">VMEC-weighted transforms</text>
  <text x="744" y="156" class="t2">Fourier residual blocks</text>
  <text x="744" y="176" class="mono">fsqr, fsqz, fsql</text>

  <!-- arrows -->
  <path d="M 200 133 L 250 133" class="arrow"/>
  <path d="M 440 133 L 490 133" class="arrow"/>
  <path d="M 680 133 L 730 133" class="arrow"/>

  <!-- footer -->
  <text x="20" y="212" class="note">See: docs/algorithms.rst (kernels + conventions) and docs/validation.rst (parity scoreboards).</text>
</svg>

